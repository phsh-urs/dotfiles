#config initially inspired by official documentation, archwiki and vEnhance's config

# setting $mod to alt temporally since my keyboard has only one Super key and I am currently lazy to replace alt and Super
set $mod Mod4

# make sure screen is redshifted at startup
exec --no-startup-id redshift -P -O 4000

# make sure sink is muted
exec --no-startup-id ponymix mute
# use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
#setting the font same as Evan's
font pango:DejaVu Sans Mono 16 

# Settings
focus_follows_mouse no

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
# note: the following config is taking out of evan's dotfiles, which contained a awesome 6 Free font which i did not included

bar {
  id bottom-bar
  position bottom
  font pango:Inconsolata,Font Awesome 6 Free 14
  strip_workspace_numbers yes
  tray_output primary
  status_command py3status

  colors {
    background #121212
    statusline #efefef
    separator #00cca7

    focused_workspace #fefefe #289977
    active_workspace   #dddddd #333388
    inactive_workspace  #cdcdcd #121212
    urgent_workspace   #ffffff #900000
  }
}

# window color {{{
# class                 border  backgr. text    indic.  child_border
client.focused          #4c7899 #007797 #ffffff #2e9ef4 #285577
client.focused_inactive #333333 #554444 #cccccc #484e50 #5f676a
client.unfocused        #333333 #222222 #666666 #292d2e #222222
client.urgent           #2f343a #900000 #ffffff #900000 #900000
client.placeholder      #000000 #0c0c0c #ffffff #000000 #0c0c0c
# }}}


# keybindings are replaced for vim compatibility and dvorak

# [hjkl] navigation {{{
# change focus
  bindsym $mod+h focus left
  bindsym $mod+j focus down
  bindsym $mod+k focus up
  bindsym $mod+l focus right
  #  bindsym $mod+Left  workspace prev
  #  bindsym $mod+Right workspace next

  # alternatively, you can use the cursor keys:
  bindsym $mod+Left focus left
  bindsym $mod+Down focus down
  bindsym $mod+Up focus up
  bindsym $mod+Right focus right

  # move focused window
  bindsym $mod+Shift+h move left
  bindsym $mod+Shift+j move down
  bindsym $mod+Shift+k move up
  bindsym $mod+Shift+l move right
#}}}

# window layouts {{{
  # split in horizontal orientation
  bindsym $mod+z split h
  # split in vertical orientation
  bindsym $mod+v split v

  # enter fullscreen mode for the focused container
  bindsym $mod+f fullscreen toggle

  # change container layout (stacked, tabbed, toggle split)
  bindsym $mod+s layout stacking
  bindsym $mod+t layout tabbed
  bindsym $mod+e layout toggle split
  # Default stacking
  workspace_layout stacking

  # toggle tiling / floating
  bindsym $mod+period floating toggle
  # change focus between tiling / floating windows
  bindsym $mod+Tab focus mode_toggle

  # focus the parent container
  bindsym $mod+a focus parent
  # focus the child container
  bindsym $mod+b focus child
# }}}

# move the currently focused window to the scratchpad
bindsym $mod+Shift+minus move scratchpad
# Show the next scratchpad window or hide the focused scratchpad window.
# If there are multiple scratchpad windows, this command cycles through them.
bindsym $mod+minus scratchpad show



# close focused window [q] {{{
# we implement this in a separate mode as a sort of confirmation
# (and so that if we hold down the key by accident nothing happens
bindsym $mod+q mode "close"
mode "close" {
  bindsym Return kill window, mode "default"
  bindsym Escape mode "default"
  bindsym a mode "default"
  bindsym b mode "default"
  bindsym c mode "default"
  bindsym d mode "default"
  bindsym e mode "default"
  bindsym f mode "default"
  bindsym g mode "default"
  bindsym h mode "default"
  bindsym i mode "default"
  bindsym j mode "default"
  bindsym k mode "default"
  bindsym l mode "default"
  bindsym m mode "default"
  bindsym n mode "default"
  bindsym o mode "default"
  bindsym p mode "default"
  bindsym q mode "default"
  bindsym r mode "default"
  bindsym s mode "default"
  bindsym t mode "default"
  bindsym u mode "default"
  bindsym v mode "default"
  bindsym w mode "default"
  bindsym x mode "default"
  bindsym y mode "default"
  bindsym z mode "default"
}
# }}}
      

# power mode [shift+backslash] {{{
mode "danger" {
  bindsym e exit
  bindsym s exec --no-startup-id systemctl suspend, mode "default"
  bindsym p exec --no-startup-id systemctl poweroff
  bindsym r exec --no-startup-id systemctl reboot
 # bindsym x exec --no-startup-id $HOME/dotfiles/sh-scripts/xrandr.sh, mode "default"
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+Shift+backslash exec --no-startup-id $HOME/dotfiles/i3/reminder-danger.sh, mode "danger"
# }}}

# open[o] {{{
mode "exec" {
  bindsym e exec TZ=UTC firefox &, mode "default" 
  # bindsym $mod+e exec firefox &, mode "default"
  bindsym g exec geogebra &, mode "default" 
  bindsym p exec TZ=UTC firefox --private-window &, mode "default"
  bindsym w exec TZ=UTC firefox --new-window https://web.whatsapp.com
  bindsym z exec zathura &; mode "default" 

  bindsym Escape mode "default" 
  bindsym Return mode "default"
}
bindsym $mod+o exec --no-startup-id $HOME/dotfiles/i3/reminder-exec.sh, mode "exec"
# }}}

# Ponymix (volUme ctl)  mode [u] {{{
  include ~/dotfiles/i3/modes/ponymix
  bindsym $mod+u exec --no-startup-id $HOME/dotfiles/i3/reminder-ponymix.sh, mode "ponymix"
#}}}

# misc commands {{{
  # start a terminal
  bindsym $mod+Return exec i3-sensible-terminal

  # start rofi replacement for dmenu (a program launcher)
  bindsym $mod+d exec --no-startup-id rofi -modi drun#run -show drun 

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# switch to workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym $left       resize shrink width 10 px or 10 ppt
        bindsym $down       resize grow height 10 px or 10 ppt
        bindsym $up         resize shrink height 10 px or 10 ppt
        bindsym $right      resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left        resize shrink width 10 px or 10 ppt
        bindsym Down        resize grow height 10 px or 10 ppt
        bindsym Up          resize shrink height 10 px or 10 ppt
        bindsym Right       resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape or $mod+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"

